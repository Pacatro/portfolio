---
import Prompt from "./Prompt.astro";

const { path, command, contacts, email = "" } = Astro.props;

// const copyToClipboard = (text: HTML) => {
//   navigator.clipboard
//     .writeText(text)
//     .then(() => {
//       alert("Texto copiado al portapapeles!");
//     })
//     .catch((err) => {
//       console.error("Error al copiar el texto: ", err);
//     });
// };
---

<script>
  const copyToClipboard = (text: string) => {
    navigator.clipboard
      .writeText(text)
      // TODO: DO SOMETHING WHEN THE TEXT IS COPIED
      // .then(() => {
      //   alert("Texto copiado al portapapeles!");
      // })
      .catch((err) => {
        console.error("Error al copiar el texto: ", err);
      });
  };

  const emailElement = document.getElementById("email");

  if (emailElement) {
    const email = emailElement.innerText;
    emailElement.addEventListener("click", () => {
      copyToClipboard(email);
    });
  }
</script>

<footer class="mt-20">
  <Prompt path={path} command={command.toLowerCase()} />
  <div class="mt-4 flex flex-col gap-2">
    <div class="flex flex-row gap-4">
      <p class="text-xl">- Email:</p>
      <p class="text-xl hover:cursor-pointer hover:underline" id="email">
        {email}
      </p>
    </div>
    {
      contacts.map((contact: { name: string; url: string }) => (
        <p class="text-xl">
          - {contact.name}:{" "}
          <a
            href={contact.url}
            target="_blank"
            rel="noopener noreferrer"
            class="hover:underline"
          >
            {contact.url}
          </a>
        </p>
      ))
    }
  </div>
</footer>
