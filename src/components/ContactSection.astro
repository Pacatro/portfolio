---
import Prompt from "./Prompt.astro";

const { path, command, contacts, email = "", id } = Astro.props;
---

<footer class="mt-20 mb-20" id={id}>
  <Prompt path={path} command={command} />
  <div class="mt-4 flex flex-col gap-2">
    <div class="flex items-center gap-2 text-base sm:text-lg">
      <span class="text-green-300">-</span>
      <span class="text-cyan-300">Email: </span>
      <spam
        class="text-base text-gray-50 font-mononoki sm:text-lg transition duration-300"
        id="email"
      >
        {email}
      </spam>
      <button
        class="flex items-center justify-center p-1 rounded text-gray-50 hover:text-[#C8A8FC] hover:bg-gray-700 transition duration-300"
        aria-label="Copy email"
        id="copy-button"
      >
        <img src="/copy.svg" alt="Copy" class="h-4 w-4" id="copy-icon" />
      </button>
    </div>
    {
      contacts.map((contact: { name: string; url: string }) => (
        <p class="text-base sm:text-lg">
          <span class="text-green-300">-</span>
          <span class="text-cyan-300">{contact.name}:</span>
          <a
            href={contact.url}
            target="_blank"
            rel="noopener noreferrer"
            class="hover:text-[#C8A8FC] transition duration-300"
          >
            {contact.url}
          </a>
        </p>
      ))
    }
  </div>
</footer>

<script>
  const copyToClipboard = (text: string) => {
    return navigator.clipboard.writeText(text);
  };

  const copyButton = document.getElementById(
    "copy-button"
  ) as HTMLButtonElement;
  const emailElement = document.getElementById("email") as HTMLSpanElement;
  const copyIcon = document.getElementById("copy-icon") as HTMLImageElement;

  const email = emailElement.innerText;
  copyButton.addEventListener("click", () => {
    copyToClipboard(email)
      .then(() => {
        copyIcon.src = "../../public/check.svg";
        copyIcon.alt = "Copied";
      })
      .catch((err) => console.error("Error while copying text: ", err));
  });
</script>
